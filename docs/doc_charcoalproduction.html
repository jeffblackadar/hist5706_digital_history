
<html>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
<h1>Charcoal Production Model</h1>
<h2>Model: CharcoalProductionMap class</h2>

    </p> Map:
    Represents the hex grid of cells. The grid is represented by a 2-dimensional array of cells with adjacency rules specific to hexagons.

    </p> Furnace:
    The furnace is at the center of the map.
    When colliers cut down the forest to make charcoal in a neighbouring cell, that cell's forest's age becomes 0 and is not mature.

    </p> land Cell:
    Each hexagon represents a single area of forest in the simulation.
    
    The land cell is most often a forest that can be mature (above the age of a mature forest and ready to cut) or young (not read to cut)
    The land cell where the furnace is located is not a forest.
    The age of the forest increases each year and is displayed in the cell. The color of the cell is determined by land cell state or forest age. 
            <div class="mermaid">
classDiagram
    class CharcoalProductionMap
CharcoalProductionMap : +add_cell(self, x,y)
CharcoalProductionMap : +__init__(self, height=50, width=50, required_charcoal_loads_per_year=2, cells_cut_for_charcoal_hearth=3,collection_radius=3, forest_age_maturity=30, hexgrid = True)
CharcoalProductionMap : +object grid HexGrid a grid to represent the map.
CharcoalProductionMap : +step(self)
        </div>
<h2>Agent: Furnace class</h2>

    The furnace is at the center of the map.
    When colliers cut down the forest to make charcoal in a neighbouring cell, that cell's forest's age becomes 0 and is not mature. 
        
    Attributes:
        See comments below in __init__
            <div class="mermaid">
classDiagram
    class Furnace
Furnace : +__init__(self, pos, model, init_state=RUNNING, required_charcoal_loads_per_year=REQLOADS, cells_cut_for_charcoal_hearth=CELLSFORHEARTH,collection_radius=3)
Furnace :  +int x position
Furnace :  +int y
Furnace :  +int state 1=running 0=stopped/closed
Furnace :  +int _nextState The state this will be at the end of a step
Furnace :  +bool isConsidered Determines if this is considered for processing.
Furnace :  +int cells_cut The number of land_cells the furnace has cut or harvested
Furnace :  +int loads of chancoal produced
Furnace :  +int required_charcoal_loads The required number of loads to operate the furnace
Furnace :  +int cells_cut_for_charcoal_hearth The number of cells of wood required to build a charcoal hearth
Furnace :  +int collection_radius The maximum distance from the furnace wood is cut and charcoal is harvested
Furnace : +getColorNumber(self)
Furnace : +neighbors(self)
Furnace : +neighbors_outer(self, radius)
Furnace : +state_text(self)
Furnace : +considered(self)
Furnace : +step(self)
Furnace : +advance(self)
        </div>

<h3>Furnace</h3>
The furnace is at the center of the map. It is unforested. Charcoal hearths can't be built on the furnace cell. In some simulations the furnace closes if it does not receive a sufficient amount of charcoal that year.
<div class="mermaid">
graph TD
classDef S_LANDCELL_FURNACER fill:#000,color:#000
classDef S_LANDCELL_FURNACEC fill:#999,color:#999
FURNACETEXT1["Furnace, Running."]-->FURNACER{{"O"}}
FURNACETEXT2["Furnace, Closed."]-->FURNACEC{{"O"}}
class FURNACER S_LANDCELL_FURNACER;
class FURNACEC S_LANDCELL_FURNACEC;

</div>
        </div>
<h2>Agent: LandCell class</h2>
 
    Represents a single area of forest in the simulation.

    The land cell is most often a forest that can be mature (above the age of a mature forest and ready to cut) or young (not read to cut)
    The land cell where the furnace is located is not a forest.
    The age of the forest increases each year and is displayed in the cell. The color of the cell is determined by land cell state or forest age.    
    
    Attributes:
        See comments below in __init__
            <div class="mermaid">
classDiagram
    class LandCell
LandCell : +__init__(self, pos, model, init_state=FORESTMATURE, init_age=100, init_color="grey")
LandCell :  +int x position
LandCell :  +int y
LandCell :  +int state 1=running
LandCell :  +int forest_age
LandCell :  +int _nextState The state this will be at the end of a step
LandCell :  +bool isConsidered Determines if this is considered for processing.
LandCell :  +int color decimal number cell
LandCell :  +object charcoal_hearth This landcell's charcoal hearth, if present
LandCell :  +bool has_charcoal_hearth This landcell has a charcoal hearth
LandCell : +setColor(self)
LandCell : +getColorNumber(self)
LandCell : +isForest(self)
LandCell : +isForestMature(self)
LandCell : +neighbors(self)
LandCell : +considered(self)
LandCell : +step(self)
LandCell : +advance(self)
        </div>

<h3>Forest types</h3>
<div class="mermaid">
graph TD
classDef S_LANDCELL_FMATURE fill:#060,color:#060
classDef S_LANDCELL_FCUT fill:#660,color:#660
classDef S_LANDCELL_FYOUNG fill:#0e0,color:#0e0
FMATURE["Forest, Mature<br>Age of forest is<br>above maturity."]-->LCFM1{{"O"}}
FCUT["Forest, Cut<br>Forest was just cut."]-->LCFM2{{"O"}}
FYOUNG["Forest, Young<br>Age of forest is<br>below maturity."]-->LCFM3{{"O"}}
class LCFM1 S_LANDCELL_FMATURE;
class LCFM2 S_LANDCELL_FCUT;
class LCFM3 S_LANDCELL_FYOUNG;
</div>




        </div>
<h2>Agent: CharcoalHearth class</h2>
 
    Represents a single charcoal hearth that is situated in an area of forest (LandCell) in the simulation.

    The charcoal hearth may be in any type of forest and has three states: 
    built (the meiler is constructed from wood cut in neighboring cells), 
    Fired (a transitory state to produce charcoal), 
    Relict (A charcoal hearth that was fired previously.)   
    
    Attributes:
        See comments below in __init__
            <div class="mermaid">
classDiagram
    class CharcoalHearth
CharcoalHearth : +__init__(self, pos, model)
CharcoalHearth :  +int state FIRED = 1, RELICT = 0, BUILT = 2
CharcoalHearth : +setColor(self)
CharcoalHearth : +neighbors(self)
CharcoalHearth : +neighbors_outer(self, radius)
CharcoalHearth : +considered(self)
CharcoalHearth : +step(self)
CharcoalHearth : +advance(self)
        </div>


<h3>Charcoal Hearths</h3>
<h4>Relict Charcoal Hearth</h4>
A relict charcoal hearth can be located on any type of forest cell.
<div class="mermaid">
graph TD
classDef S_LANDCELL_FMATURE fill:#060,color:#000
classDef S_LANDCELL_FCUT fill:#660,color:#000
classDef S_LANDCELL_FYOUNG fill:#0e0,color:#000
RCHFMATURE["Relict Charcoal Hearth<br>on Forest, Mature."]-->RCH1{{"O"}}
RCHFCUT["Relict Charcoal Hearth<br>on Forest, Cut."]-->RCH2{{"O"}}
RCHFYOUNG["Relict Charcoal Hearth<br>on Forest, Young."]-->RCH3{{"O"}}
class RCH1 S_LANDCELL_FMATURE;
class RCH2 S_LANDCELL_FCUT;
class RCH3 S_LANDCELL_FYOUNG;
</div>

<h4>Fired Charcoal Hearth</h4>
A fired charcoal hearth can be located on any type of forest cell.
<div class="mermaid">
graph TD
classDef S_LANDCELL_FMATURE fill:#060,color:#ff0
classDef S_LANDCELL_FCUT fill:#660,color:#ff0
classDef S_LANDCELL_FYOUNG fill:#0e0,color:#ff0
RCHFMATURE["Fired Charcoal Hearth<br>on Forest, Mature."]-->RCH1{{"O"}}
RCHFCUT["Fired Charcoal Hearth<br>on Forest, Cut."]-->RCH2{{"O"}}
RCHFYOUNG["Fired Charcoal Hearth<br>on Forest, Young."]-->RCH3{{"O"}}
class RCH1 S_LANDCELL_FMATURE;
class RCH2 S_LANDCELL_FCUT;
class RCH3 S_LANDCELL_FYOUNG;
</div>
        </div>
<hr>Back to <a href="https://jeffblackadar.github.io/hist5706_digital_history/">Documentation page</a>.  </body>
</html>
